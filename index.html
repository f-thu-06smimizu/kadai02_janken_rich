<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JACKPOT FEVER</title>
    <link
      href="https://fonts.googleapis.com/css?family=Noto+Sans+JP"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>

  <body>
    <div id="game-container">
        
        <div id="prize-table">
            <h2>ğŸ“œ æ „å…‰ã®é…å½“è¡¨ ğŸ“œ</h2>
            <div class="table-row header">
                <span class="symbol-col">çµµæŸ„</span>
                <span class="payout-col">é…å½“</span>
            </div>
            <div class="table-row">
                <span class="symbol-col">ğŸ‘‘ğŸ‘‘ğŸ‘‘</span>
                <span class="payout-col">500</span>
            </div>
            <div class="table-row">
                <span class="symbol-col">ğŸ›¡ï¸ğŸ›¡ï¸ğŸ›¡ï¸ / ğŸ“œğŸ“œğŸ“œ</span>
                <span class="payout-col">100</span>
            </div>
            <div class="table-row">
                <span class="symbol-col">âš”ï¸âš”ï¸âš”ï¸ / ğŸ·ğŸ·ğŸ·</span>
                <span class="payout-col">50</span>
            </div>
            <div class="table-row sub-payout">
                <span class="symbol-col">ä»»æ„ã®2ã¤æƒã„</span>
                <span class="payout-col">10</span>
            </div>
        </div>
        
        <main>
            <section>
                <p>ç¾åœ¨ã®ã‚®ãƒ«ãƒ€ãƒ¼ï¼š <span id="coins-display">100</span>æš</p>
            </section>

            <section id="reels-section">
                <p id="reel-1" class="reel">?</p>
                <p id="reel-2" class="reel">?</p>
                <p id="reel-3" class="reel">?</p>
            </section>

            <section>
                <p id="result-display">PUSH START</p>
            </section>

            <section id="user-buttons">
                <button id="spin-btn">START</button>
            </section>
        </main>
        
    </div>
    </body>

    <script>
      /// 1. å¤‰æ•°ãƒ»å®šæ•°å®šç¾©ï¼ˆã‚²ãƒ¼ãƒ è¨­å®šï¼‰
      // é€šè²¨ã‚’ã€Œã‚³ã‚¤ãƒ³ã€ã‹ã‚‰ã€Œã‚®ãƒ«ãƒ€ãƒ¼ã€ã«å¤‰æ›´
      let coins = 100; // HTMLè¡¨ç¤ºã‚‚ã€Œã‚®ãƒ«ãƒ€ãƒ¼ã€ã«å¤‰æ›´
      const BET_COST = 5;
      const symbols = ["ğŸ‘‘", "ğŸ›¡ï¸", "ğŸ“œ", "ğŸ·", "âš”ï¸"];
      // ğŸ‘‘: ç‹å† ã€ğŸ›¡ï¸: ç›¾ã€ğŸ“œ: å·»ç‰©ã€ğŸ·: ãƒ¯ã‚¤ãƒ³ã€âš”ï¸: å‰£

      // 2. HTMLè¦ç´ å–å¾—
      const reel1 = document.getElementById("reel-1");
      const reel2 = document.getElementById("reel-2");
      const reel3 = document.getElementById("reel-3");
      const resultDisplay = document.getElementById("result-display");
      const spinBtn = document.getElementById("spin-btn");
      const coinsDisplay = document.getElementById("coins-display");
      coinsDisplay.textContent = coins;

      // 3. ãƒ©ãƒ³ãƒ€ãƒ ãªçµµæŸ„ã‚’é¸ã¶é–¢æ•°
      // ä¿®æ­£: é–¢æ•°åã®typo (getRandomSybol) ã‚’ä¿®æ­£
      function getRandomSymbol() {
        const randomIndex = Math.floor(Math.random() * symbols.length);
        return symbols[randomIndex];
      }

      // 4. ã‚¹ãƒ­ãƒƒãƒˆã‚’å›è»¢ã•ã›ã‚‹ãƒ¡ã‚¤ãƒ³å‡¦ç†
      function spinSlot() {
        if (coins < BET_COST) {
          resultDisplay.textContent = "ã‚³ã‚¤ãƒ³ãŒè¶³ã‚Šã¾ã›ã‚“ï¼ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼";
          spinBtn.disabled = true;
          return;
        }

        coins -= BET_COST;
        coinsDisplay.textContent = coins;

        // 3ã¤ã®ãƒªãƒ¼ãƒ«ã®çµµæŸ„ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«æ±ºå®š
        const result1 = getRandomSymbol();
        const result2 = getRandomSymbol();
        const result3 = getRandomSymbol();

        // ä¿®æ­£: çµµæŸ„ã‚’è¡¨ç¤ºã™ã‚‹å‡¦ç†è¿½åŠ 
        reel1.textContent = result1;
        reel2.textContent = result2;
        reel3.textContent = result3;

        // å‹æ•—åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’å‘¼ã³å‡ºã™
        checkWin(result1, result2, result3);
      }

      // 5. é…å½“åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
      function checkWin(r1, r2, r3) {
        let payout = 0;
        let resultText = ""; // åˆæœŸåŒ–ã‚’ç©ºã«ã—ã¦ã€åˆ¤å®šå¾Œã«å¿…ãšè¨­å®šã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™
        let resultClass = "lose";

        // ï¼“ã¤æƒã£ãŸã‹ã‚’åˆ¤å®š (Win)
        if (r1 === r2 && r2 === r3) {
          resultText = "ç‹æ¨©ãŒã€å¯Œã‚’ã‚‚ãŸã‚‰ã™ï¼"; // å‹åˆ©æ¡ˆB
          resultClass = "win";

          if (r1 === "ğŸ‘‘") {
            // ç‹å†  (Crown) ãŒæƒã£ãŸã‚‰æœ€é«˜é…å½“
            payout = 500;
          } else if (r1 === "ğŸ›¡ï¸" || r1 === "ğŸ“œ") {
            // ç›¾ã‚„å·»ç‰©ï¼ˆæ¨©åŠ›/çŸ¥è­˜ï¼‰
            payout = 100;
          } else {
            // å‰£ã‚„ãƒ¯ã‚¤ãƒ³ï¼ˆä¸€èˆ¬çš„/æˆ¦é—˜ï¼‰
            payout = 50;
          }

          // 2ã¤æƒã£ãŸã‹ã©ã†ã‹ã‚’åˆ¤å®š (Draw)
        } else if (r1 === r2 || r2 === r3 || r1 === r3) {
          resultText = "å ±å„Ÿã‚’å¾—ãŸã€‚ã„ã–ã€æ¬¡ã¸ï¼"; // å¼•ãåˆ†ã‘æ¡ˆA
          resultClass = "draw";
          payout = 10;

          // å®Œå…¨ã«å¤–ã‚ŒãŸå ´åˆ (Lose)
        } else {
          // ã€ä¿®æ­£ãƒ»è¿½åŠ ã€‘è² ã‘ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ˜ç¤ºçš„ã«è¨­å®š
          resultText = "ãƒ•ã‚©ãƒ«ãƒˆã‚¥ãƒŠã¯ã€å¾®ç¬‘ã¾ãšã€‚"; // æ•—åŒ—æ¡ˆB
          resultClass = "lose";
          payout = 0;
        }

        resultDisplay.className = "";
        resultDisplay.classList.add(resultClass);

        coins += payout;
        coinsDisplay.textContent = coins;

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æœ€å¾Œã« (payoutæšã‚²ãƒƒãƒˆ) ã‚’è¿½åŠ 
        resultDisplay.textContent = `${resultText} (${payout}ã‚®ãƒ«ãƒ€ãƒ¼ã‚²ãƒƒãƒˆ)`;
      }

      // 6. ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
      spinBtn.addEventListener("click", () => {
        spinSlot();
      });
    </script>
  </body>
</html>
